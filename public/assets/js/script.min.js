const socket=io();function ready(e){"loading"!=document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&e()})}function addMessages(e){$("#messages>tbody").prepend(`<tr><td>${e.codename}::${e.affiliation}</td><td>${e.message}</td></tr>`)}function getMessages(){fetch("/messages").then(function(e){return e.json()}).then(function(e){e.forEach(addMessages)})}function sendMessage(e){fetch("/messages",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)}).then(function(e){return e})}ready(function(){document.querySelector("#send").addEventListener("click",()=>{sendMessage({codename:document.getElementById("codename").value,affiliation:document.getElementById("affiliation").value,message:document.getElementById("message").value}),swal.fire({title:"Success!",text:"ส่งข้อความเรียบร้อย",icon:"success",confirmButtonText:"ปิดหน้าต่าง"}).then(function(){location.reload()})})}),ready(getMessages()),socket.on("message",addMessages),$(document).ready(function(){$('button[type="submit"]').attr("disabled",!0),$('input[type="text"],textarea').on("keyup",function(){var e=$('input[id="codename"]').val(),t=$('input[id="affiliation"]').val(),n=$("#message").val();""!=e&&""!=t&&""!=n?$('button[type="submit"]').attr("disabled",!1):$('button[type="submit"]').attr("disabled",!0)})});